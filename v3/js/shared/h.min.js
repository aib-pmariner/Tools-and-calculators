function context(){function e(){function e(n){function o(e){var t=split(e,/([\.#]?[^\s#.]+)/);/^\.|#/.test(t[1])&&(r=document.createElement("div")),forEach(t,function(e){var t=e.substring(1,e.length);e&&(r?"."===e[0]?ClassList(r).add(t):"#"===e[0]&&r.setAttribute("id",t):r=document.createElement(e))})}var i;if(null==n);else if("string"==typeof n)r?r.appendChild(i=document.createTextNode(n)):o(n);else if("number"==typeof n||"boolean"==typeof n||n instanceof Date||n instanceof RegExp)r.appendChild(i=document.createTextNode(n.toString()));else if(isArray(n))forEach(n,e);else if(isNode(n))r.appendChild(i=n);else if(n instanceof Text)r.appendChild(i=n);else if("object"==typeof n)for(var s in n)if("function"==typeof n[s])/^on\w+/.test(s)?!function(e,n){r.addEventListener?(r.addEventListener(e.substring(2),n[e],!1),t.push(function(){r.removeEventListener(e.substring(2),n[e],!1)})):(r.attachEvent(e,n[e]),t.push(function(){r.detachEvent(e,n[e])}))}(s,n):(r[s]=n[s](),t.push(n[s](function(e){r[s]=e})));else if("style"===s)if("string"==typeof n[s])r.style.cssText=n[s];else for(var a in n[s])(function(e,o){if("function"==typeof o)r.style.setProperty(e,o()),t.push(o(function(t){r.style.setProperty(e,t)}));else var i=n[s][e].match(/(.*)\W+!important\W*$/);i?r.style.setProperty(e,i[1],"important"):r.style.setProperty(e,n[s][e])})(a,n[s][a]);else if("attrs"===s)for(var f in n[s])r.setAttribute(f,n[s][f]);else"data-"===s.substr(0,5)?r.setAttribute(s,n[s]):r[s]=n[s];else if("function"==typeof n){var f=n();r.appendChild(i=isNode(f)?f:document.createTextNode(f)),t.push(n(function(e){isNode(e)&&i.parentElement?(i.parentElement.replaceChild(e,i),i=e):i.textContent=e}))}return i}for(var n=[].slice.call(arguments),r=null;n.length;)e(n.shift());return r}var t=[];return e.cleanup=function(){for(var e=0;e<t.length;e++)t[e]();t.length=0},e}function isNode(e){return e&&e.nodeName&&e.nodeType}function forEach(e,t){if(e.forEach)return e.forEach(t);for(var n=0;n<e.length;n++)t(e[n],n)}function isArray(e){return"[object Array]"==Object.prototype.toString.call(e)}var split=require("browser-split"),ClassList=require("class-list"),w="undefined"==typeof window?require("html-element"):window,document=w.document,Text=w.Text,h=module.exports=context();h.context=context;